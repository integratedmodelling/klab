(function(e){function t(t){for(var s,r,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],s=!0,r=1;r<o.length;r++){var l=o[r];0!==n[l]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=o[0]))}return e}var s={},n={0:0},a=[];function r(e){return i.p+"js/"+({}[e]||e)+"."+{2:"a0277033",3:"fd1b4460"}[e]+".js"}function i(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,s){o=n[e]=[t,s]}));t.push(o[2]=s);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=r(e);var c=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(d);var o=n[e];if(0!==o){if(o){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",c.name="ChunkLoadError",c.type=s,c.request=a,o[1](c)}n[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=s,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/modeler/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;a.push([0,1]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0797":function(e,t,o){},2573:function(e,t,o){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ks-container"},[t("div",{staticClass:"ks-inner",style:{width:`${e.size}px`,height:`${e.size}px`}},[t("svg",{staticClass:"ks-spinner",attrs:{width:e.size,height:e.size,viewBox:"-120 -120 250 250",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[t("g",[t("path",{style:{fill:e.computedLogoColor},attrs:{d:"m -16.409592,-90.96723 c -12.731141,3.59794 -48.295273,15.083119 -67.807071,61.025834 -14.253345,33.488415 -9.270515,65.732442 11.486766,85.52103 11.762457,11.070564 26.293601,22.141638 56.460848,18.543704 0,0 0.413685,11.899764 -28.646647,13.421956 -0.138604,0 -0.137607,-6.24e-4 -0.275681,0.13782 0.691951,0.415268 1.521665,0.830861 2.213562,1.24598 24.355214,8.579676 40.6831588,-6.365553 50.7850434,-21.44918 0,0 15.4987796,14.53115 2.7676326,32.935946 -0.1386,0.27668 0.0019,0.55137 0.278385,0.55137 4.289845,-0.1386 8.441295,-0.55133 12.454363,-1.24328 44.974093,-8.71801 79.015461,-48.29683 79.015461,-95.761805 -0.13859,-23.524924 -8.303479,-44.973534 -22.003241,-61.717741 -2.629265,3.459554 -14.666883,17.988557 -31.549442,15.497686 -50.9245092,-7.611015 -64.486968,15.914431 -64.763747,43.45242 -0.276678,22.971358 -12.178682,33.349477 -12.178682,33.349477 -15.775524,14.253336 -47.880078,1.384892 -41.514544,-45.94168 4.843361,-36.53279 27.953112,-63.239411 53.968907,-76.385668 l -1.659498,-1.108134 c 0,0 1.105979,-2.075735 0.967585,-2.075735 z M 9.7451084,5.900034 c 1.2454676,0 2.3541156,1.105994 2.3541156,2.351411 0,1.245462 -1.108648,2.354112 -2.3541156,2.354112 -1.2454064,0 -2.3514093,-1.10865 -2.3514093,-2.354112 0,-1.245417 1.1060029,-2.351411 2.3514093,-2.351411 z"}})])]),t("div",{staticClass:"ks-circle-container",class:{moving:e.moving},style:{width:`${e.size}px`,height:`${e.size}px`,padding:`${e.circleContainerPadding}px`}},[t("svg",{staticClass:"ks-circle-path",style:{"margin-top":-e.ball+"px"},attrs:{width:2*e.ball,height:2*e.ball,version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[t("circle",{staticClass:"ks-ball",style:{fill:e.computedBallColor},attrs:{cx:e.ball,cy:e.ball,r:e.ball}})])])])])},n=[],a=o("bc78"),r=o("2f62"),i=o("7cca"),l={props:{size:{type:Number,default:200},ball:{type:Number,default:12},color:{type:String,default:a["a"].getBrand("k-main")},logoColor:{type:String,default:i["d"].SPINNER_ELEPHANT_DEFAULT_COLOR},ballColor:{type:String,default:a["a"].getBrand("primary")},stroke:{type:String,default:"none"},animated:{type:Boolean,default:!0},storeControlled:{type:Boolean,default:!0},wrapperId:{type:String,required:!0}},computed:{...Object(r["c"])("view",["spinner"]),circleContainerPadding(){return this.size*i["e"].WHITE_SPACE_PERCENTAGE},computedLogoColor(){return this.storeControlled&&this.spinner.logoColor||this.logoColor},computedBallColor(){return this.storeControlled&&this.spinner.ballColor||this.ballColor},moving(){return this.storeControlled?this.spinner.animated:this.animated},errorMessage(){return this.spinner.errorMessage},isVisible(){let e;return null!==this.wrapperId&&(e=document.getElementById(this.wrapperId),!(!e||null==e||!e.style)&&!("none"===e.style.display))}},methods:{getBrand(e){return a["a"].getBrand(e)}},watch:{errorMessage(e){if(this.spinner.showNotifications&&this.isVisible&&null!==e){let t;t=e instanceof Error?e.message:e,this.$q.notify({message:t,color:"negative",timeout:1e3})}}}},c=l,d=(o("3fc9"),o("2877")),u=Object(d["a"])(c,s,n,!1,null,"4083881a",null);t["a"]=u.exports},"2f39":function(e,t,o){"use strict";o.r(t);o("e54f"),o("7d6e"),o("62f2"),o("7e6d"),o("3bcb");var s=o("2b0e"),n=o("b05d"),a=o("4d5a"),r=o("e359"),i=o("9404"),l=o("09e3"),c=o("9989"),d=o("9c40"),u=o("0016"),p=o("27f9"),f=o("05c0"),g=o("8f8e"),m=o("24e8"),h=o("714f"),_=o("7f67"),b=o("2a19"),E=o("436b"),w=o("515f");s["a"].use(n["a"],{config:{},components:{QLayout:a["a"],QHeader:r["a"],QDrawer:i["a"],QPageContainer:l["a"],QPage:c["a"],QBtn:d["a"],QIcon:u["a"],QInput:p["a"],QTooltip:f["a"],QCheckbox:g["a"],QDialog:m["a"]},directives:{Ripple:h["a"],ClosePopup:_["a"]},plugins:{Notify:b["a"],Dialog:E["a"],Cookies:w["a"]}});var N=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"q-app"}},[t("router-view")],1)},O=[],k=o("2f62"),A=(o("5363"),{name:"App",computed:{...Object(k["c"])("view",["isConnectionDown"])},watch:{isConnectionDown(e){e&&this.$q.notify({message:this.$t("messages.networkError"),color:"negative"}),this.$store.dispatch("view/setConnectionDown",!1)}}}),R=A,j=o("2877"),v=Object(j["a"])(R,N,O,!1,null,null,null),y=v.exports,C={token:null,selectedApp:null},L={token:e=>e.token,selectedApp:e=>e.selectedApp},S={STORE_TOKEN:(e,t)=>{e.token=t},SET_SELECTED_APP:(e,t)=>{e.selectedApp=t}},I=(o("14d9"),o("bc78")),T=o("758b"),P=o("a925"),$={commons:{appName:"k.Engine"},menu:{home:"Home"},labels:{warning:"Warning",username:"Username",password:"Password",newPassword:"New password",newPasswordConfirmation:"New password confirmation",btnLogin:"Login",textLogin:"Already signed up?",btnRegister:"Register",linkLogin:"Login",textRegister:"New to <strong>k.LAB</strong>?",linkRegister:"Sign up",btnAccept:"Accept",btnCancel:"Cancel",btnGoogle:"Sign in with Google",btnSetPassword:"Set password",forgotPassword:"Forgot password?",btnResetPassword:"Reset password",rememberMe:"Remember me",selectAppTitle:"Available apps",kexplorerOption:"k.Explorer",logout:"Logout",noLayoutLabel:"<em>No title</em>",noLayoutDescription:"<em>No description</em>"},messages:{genericError:"There was an error, please try later",networkError:"Network error",fieldRequired:"Field required",passwordValidationError:"Password must be between 8 and 32 characters",passwordUnableToDo:"Unable to change user password",passwordChanged:"Password changed",passwordChangedError:"There was an error, password is not changed",passwordMailError:"There wan an error sending confirmation email, password is changed",passwordDoesNotMatch:"Password does not match the password verification field",changingPassword:"Changing password",userPswInvalid:"Bad Username or password",userAlreadyInUse:"Username or Email already in use!",invalidRedirect:"Redirect error, please contact support",failed:"Action failed",success:"Action was successful",loading:"Loading",acceptEULA:"I have read and accept the END USER LICENSE AGREEMENT (EULA) for individual non-profit use",mustAcceptEULA:"You must read and accept the EULA to download certificate",changePasswordTitle:"Change password",loggingOut:"Logging out",errorLoggingOut:"Error logging out, contact support"},contents:{registerContent:'\n    <p><strong>ARIES</strong> is an open system where all participants contribute and share knowledge for the common good. For this reason we ask that all accounts are traceable to real people and institutions. Please ensure that:</p>\n    <ul>\n      <li>Your username follows the <code>firstname.lastname</code> pattern, with your real first and last name. All the accounts created from this page are individual. If you need an institutional account (for example to install a public engine) please contact us as this use, while still free for non-profit institutions, is covered by a separate EULA.</li>\n      <li>Your email address is traceable to an institution where you work or study and whose non-profit status is verifiable.</li>\n    </ul>\n    <p>We actively monitor the registration database and we regularly delete or disable accounts that do not match the above conditions. In addition, attempts to make for-profit use of <strong>ARIES</strong> products with a non-profit licensing terms will result in permanent exclusion from the registration system and potential legal prosecution according to the\n     <a href="http://www.integratedmodelling.org/statics/eula/BC3-EULA-Not-For-Profit-Individual_EN.txt" alt="k.LAB EULA" target="_blank">EULA</a>.</p>\n     <p class="rc-lopd">By clicking the registration button you agree that the personal data you provide will be processed by ASOCIACIÃ“N BC3 BASQUE CENTRE FOR CLIMATE CHANGE-KLIMA ALDAKETA IKERGAI with the purpose of\n      managing your registration request and your access to the tool. You may exercise your rights on data protection at <a href="mailto:ARCrights@BC3research.org" target="_blank" title="Mail to ARCrights@BC3research.org">ARCrights@BC3research.org</a>.\n      <br />Additional information in this respect is available in the <a href="http://www.integratedmodelling.org/statics/eula/BC3-EULA-Not-For-Profit-Individual_EN.txt" alt="k.LAB EULA" target="_blank">EULA</a></p>\n    ',forgetPasswordContent:'\n      <p>Insert your email account information.</p><p>Please <a class="k-link" href="mailto:support@integratedmodelling.org" title="Contact us" target="_blank">Contact Us</a> if you require any assistance.</p>\n    ',homeTitle:"Welcome",homeContent:"",kxplorerDescription:"The general k.LAB interface to freely explore the observation space by querying the knowledge base. To see example queries targeted to the user's profile, move to a location of interest and press the space bar."}},M={"en-us":$};s["a"].use(P["a"]);const x=new P["a"]({locale:"en-us",fallbackLocale:"en-us",messages:M});var D=({app:e})=>{e.i18n=x},z=o("8c4f"),U=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"au-layout",view:"hHh lpR fFf"}},[t("div",{staticClass:"au-container"},[t("transition",{attrs:{appear:"","appear-class":"custom-appear-class"}},[t("div",{staticClass:"au-fixed-center text-center au-container"},[t("div",{staticClass:"au-logo-container"},[t("klab-spinner",{staticClass:"au-logo",attrs:{"store-controlled":!0,ball:12,wrapperId:"au-layout",ballColor:e.COLORS.PRIMARY}}),t("klab-brand",{attrs:{customClasses:["au-app-name"]}})],1),t("div",{staticClass:"au-content"},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)])])],1)])},G=[],B=o("2573"),q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-name",class:e.customClasses,domProps:{innerHTML:e._s(e.htmlAppName)}})},F=[],K={appName:"k.LAB Engine",appDescription:"k.LAB Engine",appColor:"#da1f26"},V={props:{customClasses:Array,default:()=>[]},data(){return{appName:K.appName,appColor:K.appColor}},computed:{htmlAppName(){return this.appName.replace(".",`<span style="color: ${this.appColor}">.</span>`)}}},W=V,H=(o("60e3"),Object(j["a"])(W,q,F,!1,null,null,null)),Q=H.exports,Y=o("7cca"),X={name:"Authorization",components:{KlabSpinner:B["a"],KlabBrand:Q},data(){return{COLORS:Y["b"]}},computed:{spinnerColor(){return this.$store.getters["view/spinnerColor"]}}},J=X,Z=(o("e50c"),o("eebe")),ee=o.n(Z),te=Object(j["a"])(J,U,G,!1,null,null,null),oe=te.exports;ee()(te,"components",{QInput:p["a"],QBtn:d["a"]});var se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"full-width column content-center au-form-container"},[t("klab-loading",{attrs:{loading:e.loading,color:"k-controls"}}),t("q-dialog",{attrs:{persistent:""},model:{value:e.modalOpen,callback:function(t){e.modalOpen=t},expression:"modalOpen"}},[t("div",{staticClass:"lp-app-selector-container q-pa-md"},[t("div",{staticClass:"lp-app-selector-title"},[e._v(e._s(e.$t("labels.selectAppTitle")))]),t("q-list",{staticClass:"rounded-borders",attrs:{bordered:"",separator:""}},[t("q-item",{attrs:{clickable:""},on:{click:function(t){return e.goto()}}},[t("q-item-section",{attrs:{top:"",avatar:""}},[t("q-avatar",[t("img",{attrs:{src:"images/k.explorer-logo-with-circle_64.svg"}})])],1),t("q-item-section",[t("q-item-label",{staticClass:"lp-app-label"},[e._v("\n              "+e._s(e.$t("labels.kexplorerOption"))+"\n            ")]),t("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("contents.kxplorerDescription"))+"\n            ")])],1)],1),e._l(e.publicApps,(function(o,s){return t("q-item",{key:s,attrs:{clickable:""},on:{click:function(t){return e.goto(o)}}},[t("q-item-section",{attrs:{avatar:"",top:""}},[t("q-avatar",[t("img",{attrs:{src:o.logoSrc}})])],1),t("q-item-section",[t("div",{staticClass:"lp-lang-description"},[t("q-item-label",{staticClass:"lp-app-label",domProps:{innerHTML:e._s(e.getLocalizedString(o,"label"))}}),o.description&&""!==o.description?t("q-item-label",{attrs:{caption:""},domProps:{innerHTML:e._s(e.getLocalizedString(o,"description"))}}):e._e()],1),o.localizations&&o.localizations.length>1?t("div",{staticClass:"kal-locales row reverse"},[t("q-select",{staticClass:"lp-lang-selector",attrs:{options:o.localeOptions,color:"k-controls","map-options":"","emit-value":"",borderless:""},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:o.selectedLocale,callback:function(t){e.$set(o,"selectedLocale",t)},expression:"app.selectedLocale"}})],1):e._e()])],1)}))],2),t("div",{staticClass:"lp-need-logout",on:{click:e.doLogout}},[e._v(e._s(e.$t("labels.logout")))])],1)])],1)},ne=[],ae={methods:{fieldRequired(e){return!!e||this.$t("messages.fieldRequired")},emailValidation(e){return Te.email.test(e)||this.$t("messages.emailValidationError")},usernameValidation(e,t=Y["a"].USERNAME_MIN_LENGTH){return Te.username.test(e)?e.length>=t||this.$t("messages.usernameFormatLengthError"):this.$t("messages.usernameFormatValidationError")},passwordValidation(e,t=Y["a"].PSW_MIN_LENGTH,o=Y["a"].PSW_MAX_LENGTH){return e.length>=t&&e.length<=o||this.$t("messages.passwordValidationError")},phoneValidation(e,t=!1){return!(t||"undefined"!==typeof e&&null!==e&&""!==e)||(Te.phone.test(e)||this.$t("messages.phoneValidationError"))}}},re=function(){var e=this,t=e._self._c;return t("q-dialog",{attrs:{"no-esc-dismiss":"","no-backdrop-dismiss":""},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("div",{staticClass:"absolute-center k-loading"},[t("q-spinner",{attrs:{size:"4em",color:e.color}}),""!==e.computedMessage?t("div",[e._v(e._s(e.computedMessage))]):e._e()],1)])},ie=[],le={name:"KlabLoading",props:{message:{type:String,default:null},loading:{type:Boolean,required:!0},color:{type:String,default:"primary"}},data(){return{}},computed:{computedMessage(){return this.message||this.$t("messages.loading")}}},ce=le,de=(o("61e0"),o("0d59")),ue=Object(j["a"])(ce,re,ie,!1,null,null,null),pe=ue.exports;ee()(ue,"components",{QDialog:m["a"],QSpinner:de["a"]});var fe={name:"LoginForm",mixins:[ae],components:{KlabLoading:pe},data(){return{user:{username:""},username:"",loading:!1,checking:!1,rememberMe:!1,modalOpen:!1,redirectUrl:null,publicApps:[]}},computed:{...Object(k["c"])("auth",["token","selectedApp"])},methods:{...Object(k["b"])("auth",["setToken"]),getLocalizedString(e,t){if(e.selectedLocale){const o=e.localizations.find((t=>t.isoCode===e.selectedLocale));if(o)return"label"===t?o.localizedLabel:o.localizedDescription;if("description"===t)return this.$t("labels.noLayoutDescription");if(e.name)return e.name;this.$t("labels.noLayoutLabel")}return""},doLogin(){return new Promise(((e,t)=>{this.$store.dispatch("auth/login",{user:this.user,token:this.token}).then((async({redirect:t,publicApps:o})=>{let s;s=-1!==t.indexOf("?")?"&":"?";const n=`${s}${Y["a"].PARAM_TOKEN}=${this.token}`;if(null!==this.selectedApp)this.redirectUrl=`${t}${n}&app=${this.selectedApp}`,this.goto();else if(o&&o.length>0){const e=o.filter((e=>"WEB"===e.platform||"ANY"===e.platform));e.forEach((e=>{console.log("_______________________________________APP___________________________________________"),console.log(e),e.logo?e.logoSrc=`/modeler/${Y["f"].GET_IMAGE.url}/${e.projectId}/${e.logo}`:e.logoSrc=Y["a"].DEFAULT_LOGO,this.$set(e,"selectedLocale",e.localizations[0].isoCode),e.localeOptions=e.localizations.map((e=>({label:e.languageDescription,value:e.isoCode,icon:"mdi-earth",className:"kal-locale-options"}))),this.publicApps.push(e)})),await Promise.all(this.publicApps),this.modalOpen=!0,this.redirectUrl=`${t}${n}`}else this.redirectUrl=`${t}${n}`,this.goto();e()})).catch((e=>{403===e.status&&(this.removeCookie(),this.setToken(null)),t(e),this.loading=!1}))}))},goto(e=null){null!==e&&(this.redirectUrl=`${this.redirectUrl}&app=${e.name}.${e.selectedLocale?e.selectedLocale:""}`),window.location=this.redirectUrl},doLogout(){this.loading=!0,this.$store.dispatch("auth/logout").then((()=>{this.removeCookie(),this.$router.go()})).catch((e=>{this.$q.notify({message:this.$t("messages.errorLoggingOut"),type:"negative",icon:"mdi-alert-circle",timeout:2e3}),console.error(e),this.loading=!1}))}},mounted(){s["a"].$keycloak.loadUserProfile().then((e=>{this.user=e,this.doLogin().catch((()=>{console.info("Need login"),this.loading=!1}))}))}},ge=fe,me=(o("ab48"),o("1c1c")),he=o("66e5"),_e=o("4074"),be=o("cb32"),Ee=o("0170"),we=o("ddd8"),Ne=Object(j["a"])(ge,se,ne,!1,null,null,null),Oe=Ne.exports;ee()(Ne,"components",{QDialog:m["a"],QList:me["a"],QItem:he["a"],QItemSection:_e["a"],QAvatar:be["a"],QItemLabel:Ee["a"],QSelect:we["a"],QInput:p["a"]});const ke=[{path:"/",redirect:"login",component:oe,children:[{path:"/login",name:"login",component:Oe}]},{path:"/tests",component:()=>o.e(3).then(o.bind(null,"18aa"))}];ke.push({path:"*",component:()=>o.e(2).then(o.bind(null,"e51e"))});var Ae=ke;s["a"].use(z["a"]);const Re=new z["a"]({scrollBehavior:()=>({y:0}),routes:Ae,mode:"hash",base:"/modeler/"});var je=Re;o("c1df");const{hexToRgb:ve,getBrand:ye,rgbToHex:Ce}=I["a"],Le=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/;function Se(e){if("string"!==typeof e)throw new TypeError("Expected a string");const t=Le.exec(e);if(t){const e={r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)};return t[4]&&(e.a=parseFloat(t[4])),e}return ve(e)}function Ie(e){let t,o;return 0===e.indexOf("#")?(o=e,t=ve(e)):-1!==e.indexOf(",")?(t=Se(e),o=Ce(t)):(o=ye(e),t=ve(o)),{rgb:t,hex:o,color:e}}const Te={email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,username:/^[a-zA-Z0-9_.-]*$/,phone:/^[+]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/};async function Pe(e){if(e.response){const t={status:e.response.data.status||e.response.status,message:e.response.data.message||e.response.data||(""!==e.response.statusText?e.response.statusText:e.statusCode?e.statusCode:"Unknown"),axiosError:e};if(t.message instanceof Blob&&"application/json"===t.message.type){const e=await new Promise((e=>{const o=new FileReader;o.onload=function(){e(JSON.parse(this.result))},o.readAsText(t.message)}));return e}return t}return e.request?{status:e.request.status,message:e.message,axiosError:e}:{status:"UNKNOWN",message:e.message,axiosError:e}}async function $e(e,t,o=null){const{type:s,url:n,params:a={},needAuth:r=!1,owner:i="layout",session:l=null,authentication:c=null}=e;if("GET"!==s&&"POST"!==s&&"PUT"!==s&&"DELETE"!==s||null===n||""===n)throw new Error(`Bad axios call, check type and url: ${s} / ${n}`);Fe.dispatch("view/setSpinner",{...Y["e"].SPINNER_LOADING,owner:"layout"},{root:!0}).then((async()=>{const e="GET"===s?T["a"].get:"POST"===s?T["a"].post:"DELETE"===s?T["a"].delete:T["a"].put,d=null!==l?{headers:{Authorization:l}}:{},u=null!==c?{headers:{Authentication:c},withCredentials:!0}:{};let p;try{p=await e(`/modeler/${n}`,{...a,...d},u),p&&(t?t(p,(()=>{Fe.dispatch("view/setSpinner",{...Y["e"].SPINNER_STOPPED,owner:i},{root:!0})})):(console.warn("Doing nothing after axios call"),Fe.dispatch("view/setSpinner",{...Y["e"].SPINNER_STOPPED,owner:i},{root:!0})))}catch(f){console.log(f);const e=await Pe(f);if(Fe.dispatch("view/setSpinner",{...Y["e"].SPINNER_ERROR,owner:i,errorMessage:e.message,showNotifications:!1},{root:!0}),r&&401===e.status)return console.warn("We are logged out from backoffice"),Fe.dispatch("auth/logout",!0,{root:!0}),void je.push("/login");if(e.message&&-1!==e.message.toLowerCase().indexOf("network error")&&Fe.dispatch("view/setConnectionDown",!0),null===o)throw e;o(e)}}))}var Me={login:({commit:e},{user:t={username:null},token:o=null})=>new Promise(((s,n)=>{null!==t||null!==o?$e({type:Y["f"].LOG_IN.method,url:Y["f"].LOG_IN.url,params:{...t,token:o}},(({data:t},o)=>{t&&(t.authorization?e("STORE_TOKEN",t.authorization):console.warn("Unknown answer",t)),s(t),o()}),(e=>{n(e)})):n("Must exists user data or token")})),logout:({commit:e,getters:t})=>new Promise(((o,n)=>{const a={redirectUri:__ENV__.APP_BASE_URL};s["a"].$keycloak.logout(a).then((s=>{console.debug(s),$e({type:Y["f"].LOG_OUT.method,url:Y["f"].LOG_OUT.url,params:{token:t.token},authentication:t.token},(({status:t})=>{205===t?(e("STORE_TOKEN",null),o()):n(`Strange status: ${t}`)}),(e=>{e.response&&403===e.response.status&&n("Probably bad token"),n(`Error logging out: ${e}`)}))})).catch((e=>{console.error(e)}))})),setToken:({commit:e},t)=>{e("STORE_TOKEN",t)},setSelectedApp:({commit:e},t)=>{e("SET_SELECTED_APP",t)}},xe={namespaced:!0,state:C,getters:L,mutations:S,actions:Me},De={spinner:Y["e"].SPINNER_STOPPED,spinnerOwners:[],connectionDown:!1},ze={spinnerIsAnimated:e=>e.spinner.animated,spinner:e=>e.spinner,spinnerOwners:e=>e.spinnerOwners,spinnerColor:e=>"undefined"!==e.spinner&&null!==e.spinner?Ie(e.spinner.color):null,spinnerErrorMessage:e=>"undefined"!==e.spinner&&null!==e.spinner?e.spinner.errorMessage:null,isConnectionDown:e=>e.connectionDown},Ue={SET_SPINNER_ANIMATED:(e,t)=>{e.spinner.animated=t},SET_SPINNER_COLOR:(e,t)=>{e.spinner.color=t},SET_SPINNER:(e,{animated:t,color:o,errorMessage:s=null,showNotifications:n=!1})=>{e.spinner={animated:t,color:o,errorMessage:s,showNotifications:n}},ADD_TO_SPINNER_OWNERS:(e,t)=>{const o=e.spinnerOwners.indexOf(t);-1===o&&e.spinnerOwners.push(t)},REMOVE_FROM_SPINNER_OWNERS:(e,t)=>{const o=e.spinnerOwners.indexOf(t);-1!==o&&e.spinnerOwners.splice(o,1)},SET_CONNECTION_DOWN:(e,t)=>{e.connectionDown=t}},Ge={setSpinner:({commit:e,getters:t,dispatch:o},{animated:s,color:n,time:a=null,then:r=null,errorMessage:i=null,showNotifications:l=!1,owner:c})=>new Promise(((d,u)=>{c&&null!==c?(s?e("ADD_TO_SPINNER_OWNERS",c):(e("REMOVE_FROM_SPINNER_OWNERS",c),0!==t.spinnerOwners.length&&(s=!0,n!==Y["e"].SPINNER_ERROR.color&&({color:n}=Y["e"].SPINNER_LOADING))),e("SET_SPINNER",{animated:s,color:n,errorMessage:i,showNotifications:l}),null!==a&&null!==r&&setTimeout((()=>{o("setSpinner",{...r,owner:c})}),1e3*a),d()):u(new Error("No spinner owner!"))})),setConnectionDown:({commit:e},t)=>{e("SET_CONNECTION_DOWN",t)}},Be={namespaced:!0,state:De,getters:ze,mutations:Ue,actions:Ge};s["a"].use(k["a"]);const qe=new k["a"].Store({modules:{auth:xe,view:Be}});var Fe=qe,Ke=async function(){const e="function"===typeof Fe?await Fe({Vue:s["a"]}):Fe,t="function"===typeof je?await je({Vue:s["a"],store:e}):je;e.$router=t;const o={router:t,store:e,render:e=>e(y),el:"#q-app"};return{app:o,store:e,router:t}},Ve=({store:e})=>{w["a"].has(Y["a"].COOKIE_TOKEN)&&(e.state.auth.token=w["a"].get(Y["a"].COOKIE_TOKEN));let t=null;const o=window.location.href.split("?");if(2===o.length){const s=o[1].split("&");s.forEach((o=>{const s=o.split("=");if(2===s.length&&"app"===s[0]){const e=s[1].indexOf("#");-1!==e&&(s[1]=s[1].substring(0,e)),[,t]=s}2===s.length&&"token"===s[0]&&(e.state.auth.token=s[1])}))}e.state.auth.selectedApp=t},We=o("15a2");const He={url:Y["c"].URL,realm:Y["c"].REALM,clientId:Y["c"].CLIENT_ID,enableCors:!0},Qe=new We["a"](He),Ye={install(e){e.$keycloak=Qe}};Ye.install=e=>{e.$keycloak=Qe,Object.defineProperties(e.prototype,{$keycloak:{get(){return Qe}}})},s["a"].use(Ye);var Xe=Ye;s["a"].config.productionTip=!1,s["a"].use(Xe),s["a"].$keycloak.init({onLoad:"login-required",checkLoginIframe:!1}).then((e=>{e?(localStorage.setItem(Y["c"].TOKEN,s["a"].$keycloak.token),localStorage.setItem(Y["c"].REFRESH_TOKEN,s["a"].$keycloak.refreshToken),s["a"].prototype.$http.defaults.headers.common.Authorization=Y["c"].BEARER+s["a"].$keycloak.token,console.debug("Authenticated"),window.location=`${__ENV__.APP_BASE_URL}/#/login`):window.location.reload(),setInterval((()=>{s["a"].$keycloak.updateToken().then((e=>{e?(console.debug(`Token refreshed ${e}`),localStorage.setItem(Y["c"].TOKEN,s["a"].$keycloak.token),localStorage.setItem(Y["c"].REFRESH_TOKEN,s["a"].$keycloak.refreshToken),s["a"].prototype.$http.defaults.headers.common.Authorization=Y["c"].BEARER+s["a"].$keycloak.token):console.debug(`Token not refreshed, valid for ${Math.round(s["a"].$keycloak.tokenParsed.exp+s["a"].$keycloak.timeSkew-(new Date).getTime()/1e3)} seconds`)})).catch((()=>{console.error("Failed to refresh token")}))}),6e4)})).catch((e=>{console.error(e),console.debug("Authenticated Failed")}));const Je="/modeler/",Ze=/\/\//,et=e=>(Je+e).replace(Ze,"/");async function tt(){const{app:e,store:t,router:o}=await Ke();let n=!1;const a=e=>{n=!0;const t=Object(e)===e?et(o.resolve(e).route.fullPath):e;window.location.href=t},r=window.location.href.replace(window.location.origin,""),i=[D,Ve,T["b"],void 0];for(let c=0;!1===n&&c<i.length;c++)if("function"===typeof i[c])try{await i[c]({app:e,router:o,store:t,Vue:s["a"],ssrContext:null,redirect:a,urlPath:r,publicPath:Je})}catch(l){return l&&l.url?void(window.location.href=l.url):void console.error("[Quasar] boot error:",l)}!0!==n&&new s["a"](e)}tt()},"3bcb":function(e,t,o){},"3c7a":function(e,t,o){},"3fc9":function(e,t,o){"use strict";o("9803")},4678:function(e,t,o){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return o(t)}function a(e){if(!o.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id="4678"},"60e3":function(e,t,o){"use strict";o("f439")},"61e0":function(e,t,o){"use strict";o("0797")},"758b":function(e,t,o){"use strict";(function(e){o.d(t,"a",(function(){return i}));var s=o("bc3a"),n=o.n(s),a=o("7cca");const r="/modeler",i=n.a.create({baseUrl:r});t["b"]=({Vue:t})=>{t.prototype.$http=i,t.$keycloak.token&&(t.prototype.$http.defaults.headers.common.Authorization=a["c"].BEARER+t.$keycloak.token),null!==e.env.X_SERVER_HEADER&&(t.prototype.$http.defaults.headers.common={...t.prototype.$http.defaults.headers.common,"X-Server-Header":e.env.X_SERVER_HEADER})}}).call(this,o("4362"))},"7cca":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"d",(function(){return n})),o.d(t,"e",(function(){return a})),o.d(t,"a",(function(){return r})),o.d(t,"f",(function(){return l})),o.d(t,"c",(function(){return c}));const s={MAIN_COLOR:"rgb(17, 170, 187)",MAIN_GREEN:"rgb(70,161,74)",MAIN_LIGHT_GREEN:"rgb(231,255,219)",MAIN_CYAN:"rgb(0,131,143)",MAIN_LIGHT_CYAN:"rgb(228,253,255)",MAIN_YELLOW:"rgb(255, 195, 0)",MAIN_RED:"rgb(255, 100, 100)",PRIMARY:"#da1f26",SECONDARY:"#26A69A",TERTIARY:"#555",NEUTRAL:"#E0E1E2",POSITIVE:"#19A019",NEGATIVE:"#DB2828",INFO:"#1E88CE",WARNING:"#F2C037",PRIMARY_NAME:"primary",SECONDARY_NAME:"secondary",TERTIARY_NAME:"tertiary",POSITIVE_NAME:"positive",NEGATIVE_NAME:"negative",INFO_NAME:"info",WARNING_NAME:"warning",COLOR_PRIMARY:"primary",COLOR_SECONDARY:"secondary",COLOR_TERTIARY:"tertiary",COLOR_POSITIVE:"positive",COLOR_NEGATIVE:"negative",COLOR_INFO:"info",COLOR_WARNING:"warning",COLOR_LIGHT:"light",COLOR_DARK:"dark",COLOR_FADED:"faded"},n={SPINNER_STOPPED_COLOR:s.MAIN_COLOR,SPINNER_LOADING_COLOR:s.MAIN_YELLOW,SPINNER_MC_RED:s.MAIN_RED,SPINNER_ERROR_COLOR:s.NEGATIVE_NAME,SPINNER_ELEPHANT_DEFAULT_COLOR:"#010102"},a={SPINNER_LOADING:{ballColor:n.SPINNER_LOADING_COLOR,color:n.SPINNER_LOADING_COLOR,animated:!0},SPINNER_STOPPED:{color:n.SPINNER_STOPPED_COLOR,animated:!1},SPINNER_ERROR:{color:n.SPINNER_ERROR_COLOR,animated:!1,time:2,then:{color:n.SPINNER_STOPPED_COLOR,animated:!1}},WHITE_SPACE_PERCENTAGE:.12},r={USERNAME_MIN_LENGTH:6,PSW_MIN_LENGTH:8,PSW_MAX_LENGTH:32,READY:0,WAITING:1,REFRESHING:2,IMAGE_NOT_FOUND_SRC:"image-off-outline.png",COOKIE_TOKEN:"klab_auth",PARAM_TOKEN:"token",PARAM_APP:"app",DEFAULT_LOGO:"images/k.explorer-logo-with-circle_64.svg"},i={WS_USERS:"api/v2/users",WS_GET_IMAGES:"engine/project/resource/get"},l={LOG_IN:{method:"POST",url:`${i.WS_USERS}/log-in?remote=true`},LOG_OUT:{method:"POST",url:`${i.WS_USERS}/log-out`},GET_IMAGE:{method:"GET",url:i.WS_GET_IMAGES}};const c={URL:__ENV__.KEYCLOAK_URL,REALM:"im",CLIENT_ID:"k.Engine",TOKEN:"vue-token",REFRESH_TOKEN:"vue-refresh-token",BEARER:"Bearer "}},"7e6d":function(e,t,o){},9803:function(e,t,o){},ab48:function(e,t,o){"use strict";o("3c7a")},e50c:function(e,t,o){"use strict";o("ea7e")},ea7e:function(e,t,o){},f439:function(e,t,o){}});